<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Hindi / English Editor</title>

    <link href="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.snow.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f4f4f4;
            padding: 20px;
        }

        .toolbar {
            margin-bottom: 10px;
        }

        #editor {
            height: 250px;
            font-size: 18px;
            font-family: "Noto Sans Devanagari", Arial, sans-serif;
        }
    </style>
</head>

<body>

    <h2>Hindi / English WYSIWYG Editor</h2>

    <div class="toolbar">
        <select id="lang">
            <option value="en">English</option>
            <option value="hi">Hindi</option>
        </select>
    </div>

    <div id="editor"></div>

    <script src="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.min.js"></script>

    <script>
        const quill = new Quill('#editor', {
            theme: 'snow'
        });

        const map = {
            "a": "अ", "aa": "आ", "i": "इ", "ee": "ई", "u": "उ", "oo": "ऊ",
            "ka": "क", "kha": "ख", "ga": "ग", "gha": "घ", "cha": "च", "ja": "ज",
            "ta": "त", "tha": "थ", "da": "द", "dha": "ध", "na": "न",
            "pa": "प", "pha": "फ", "ba": "ब", "bha": "भ", "ma": "म",
            "ya": "य", "ra": "र", "la": "ल", "va": "व",
            "sa": "स", "ha": "ह"
        };

        let buffer = "";

        quill.root.addEventListener("keydown", e => {
            if (document.getElementById("lang").value !== "hi") return;

            if (e.key.length === 1) {
                buffer += e.key.toLowerCase();
                for (let k in map) {
                    if (buffer.endsWith(k)) {
                        e.preventDefault();
                        quill.deleteText(quill.getSelection().index - k.length, k.length);
                        quill.insertText(quill.getSelection().index, map[k]);
                        buffer = "";
                        break;
                    }
                }
            }

            if (e.key === " ") buffer = "";
        });
    </script>

</body>

</html>